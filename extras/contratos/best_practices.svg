<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="750" height="600" viewBox="0 0 750 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .step { fill: #fff; stroke: #666; stroke-width: 2; rx: 5; }
      .decision { fill: #fff9c4; stroke: #f57f17; }
      .action { fill: #e3f2fd; stroke: #1976d2; }
      .check { fill: #c8e6c9; stroke: #2e7d32; }
      .arrow { fill: none; stroke: #666; stroke-width: 2; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; text-anchor: middle; }
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #1976d2; text-anchor: middle; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
  
  <text x="375" y="25" class="title">Mejores Prácticas: Flujo de Aplicación de Contratos</text>
  
  <!-- Start -->
  <ellipse cx="375" cy="60" rx="60" ry="25" fill="#4caf50" stroke="#2e7d32" stroke-width="2"/>
  <text x="375" y="67" class="label" font-weight="bold" fill="#fff">Inicio</text>
  
  <path d="M 375,85 L 375,120" class="arrow"/>
  
  <!-- Step 1: Identify critical code -->
  <rect x="275" y="130" width="200" height="60" class="step action"/>
  <text x="375" y="152" class="label" font-weight="bold">1. Identificar Código Crítico</text>
  <text x="375" y="170" class="label" font-size="10">APIs públicas, estructuras</text>
  <text x="375" y="183" class="label" font-size="10">de datos, algoritmos clave</text>
  
  <path d="M 375,190 L 375,225" class="arrow"/>
  
  <!-- Decision: Type of project? -->
  <path d="M 375,230 L 475,280 L 375,330 L 275,280 Z" class="step decision"/>
  <text x="375" y="278" class="label" font-weight="bold" font-size="11">¿Tipo de</text>
  <text x="375" y="292" class="label" font-weight="bold" font-size="11">proyecto?</text>
  
  <!-- Branch: Prototype -->
  <path d="M 275,280 L 130,280" class="arrow"/>
  <text x="200" y="270" class="label" font-size="10" fill="#999">Prototipo</text>
  
  <rect x="30" y="250" width="100" height="60" class="step check"/>
  <text x="80" y="272" class="label" font-size="10" font-weight="bold">Aserciones</text>
  <text x="80" y="286" class="label" font-size="9">básicas</text>
  <text x="80" y="300" class="label" font-size="9">assert()</text>
  
  <!-- Branch: Commercial -->
  <path d="M 375,330 L 375,365" class="arrow"/>
  <text x="390" y="350" class="label" font-size="10" fill="#999">Comercial</text>
  
  <rect x="300" y="375" width="150" height="60" class="step check"/>
  <text x="375" y="397" class="label" font-size="10" font-weight="bold">Pre/Post en APIs</text>
  <text x="375" y="411" class="label" font-size="9">Invariantes de clase</text>
  <text x="375" y="425" class="label" font-size="9">Documentación</text>
  
  <!-- Branch: Critical -->
  <path d="M 475,280 L 620,280" class="arrow"/>
  <text x="550" y="270" class="label" font-size="10" fill="#999">Crítico</text>
  
  <rect x="570" y="250" width="130" height="60" class="step check"/>
  <text x="635" y="272" class="label" font-size="10" font-weight="bold">Especificación</text>
  <text x="635" y="286" class="label" font-size="9">formal completa</text>
  <text x="635" y="300" class="label" font-size="9">ACSL + Frama-C</text>
  
  <!-- Merge paths -->
  <path d="M 80,310 L 80,450 L 375,450" class="arrow"/>
  <path d="M 375,435 L 375,450" class="arrow"/>
  <path d="M 635,310 L 635,450 L 375,450" class="arrow"/>
  
  <!-- Step 2: Write contracts -->
  <rect x="275" y="460" width="200" height="50" class="step action"/>
  <text x="375" y="480" class="label" font-weight="bold">2. Escribir Contratos</text>
  <text x="375" y="497" class="label" font-size="10">Pre, Post, Invariantes</text>
  
  <path d="M 375,510 L 375,540" class="arrow"/>
  
  <!-- Step 3: Tests -->
  <rect x="490" y="550" width="180" height="40" class="step action"/>
  <text x="580" y="573" class="label" font-weight="bold">3. Crear Tests</text>
  
  <path d="M 475,570 L 495,570" class="arrow"/>
  
  <!-- Step 4: Implement -->
  <rect x="275" y="550" width="180" height="40" class="step action"/>
  <text x="365" y="573" class="label" font-weight="bold">4. Implementar</text>
  
  <path d="M 275,570 L 255,570" class="arrow"/>
  
  <!-- Step 5: Verify -->
  <rect x="60" y="550" width="180" height="40" class="step check"/>
  <text x="150" y="573" class="label" font-weight="bold">5. Verificar</text>
  
  <path d="M 150,510 L 150,545" class="arrow"/>
  <path d="M 365,540 L 365,525 L 150,525 L 150,510" class="arrow"/>
  
  <!-- Decision: Verification OK? -->
  <path d="M 150,455 L 210,490 L 150,525 L 90,490 Z" class="step decision"/>
  <text x="150" y="488" class="label" font-weight="bold" font-size="11">¿Verificado?</text>
  
  <!-- No: Fix -->
  <path d="M 90,490 L 50,490 L 50,570 L 55,570" class="arrow"/>
  <text x="40" y="525" class="label" font-size="10" fill="#f44336">No</text>
  
  <!-- Yes: End -->
  <path d="M 210,490 L 650,490 L 650,540" class="arrow"/>
  <text x="430" y="480" class="label" font-size="10" fill="#4caf50">Sí</text>
  
  <!-- End -->
  <ellipse cx="650" cy="560" rx="60" ry="25" fill="#f44336" stroke="#c62828" stroke-width="2"/>
  <text x="650" y="567" class="label" font-weight="bold" fill="#fff">Fin</text>
</svg>
