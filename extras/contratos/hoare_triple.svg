<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="700" height="400" viewBox="0 0 700 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .state { fill: #fff; stroke: #666; stroke-width: 2; rx: 5; }
      .pre-state { fill: #ffcdd2; }
      .post-state { fill: #c8e6c9; }
      .program { fill: #bbdefb; stroke: #1976d2; stroke-width: 3; rx: 8; }
      .arrow { fill: none; stroke: #666; stroke-width: 2.5; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 14px; fill: #333; text-anchor: middle; }
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #1976d2; text-anchor: middle; }
      .formula { font-family: "Times New Roman", serif; font-size: 15px; font-style: italic; }
      .code { font-family: "Courier New", monospace; font-size: 12px; fill: #333; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
  
  <text x="350" y="30" class="title">Tripleta de Hoare: {P} S {Q}</text>
  
  <!-- Pre state -->
  <g id="pre-state">
    <rect x="50" y="80" width="150" height="120" class="state pre-state"/>
    <text x="125" y="110" class="label" font-weight="bold" font-size="16">Estado Inicial</text>
    
    <text x="125" y="140" class="formula">P</text>
    <text x="125" y="160" class="label" font-size="12">(Precondición)</text>
    
    <text x="125" y="185" class="code" font-size="11">x = 5</text>
  </g>
  
  <!-- Arrow -->
  <path d="M 200,140 L 245,140" class="arrow"/>
  <text x="222" y="130" class="label" font-size="11" fill="#999">ejecuta</text>
  
  <!-- Program -->
  <g id="program">
    <rect x="250" y="80" width="200" height="120" class="program"/>
    <text x="350" y="110" class="label" font-weight="bold" font-size="16">Programa</text>
    
    <text x="350" y="140" class="formula">S</text>
    
    <text x="270" y="170" class="code" text-anchor="start">x := x + 1;</text>
    <text x="270" y="188" class="code" text-anchor="start">y := x * 2;</text>
  </g>
  
  <!-- Arrow -->
  <path d="M 450,140 L 495,140" class="arrow"/>
  <text x="472" y="130" class="label" font-size="11" fill="#999">produce</text>
  
  <!-- Post state -->
  <g id="post-state">
    <rect x="500" y="80" width="150" height="120" class="state post-state"/>
    <text x="575" y="110" class="label" font-weight="bold" font-size="16">Estado Final</text>
    
    <text x="575" y="140" class="formula">Q</text>
    <text x="575" y="160" class="label" font-size="12">(Postcondición)</text>
    
    <text x="575" y="185" class="code" font-size="11">x = 6, y = 12</text>
  </g>
  
  <!-- Hoare triple notation -->
  <rect x="100" y="230" width="500" height="80" fill="#f5f5f5" stroke="#999" stroke-width="1.5" rx="5"/>
  <text x="350" y="255" class="label" font-weight="bold" font-size="15">Notación Formal</text>
  
  <text x="350" y="285" class="formula" font-size="16">{P} S {Q}</text>
  
  <text x="350" y="305" class="label" font-size="12">
    Si P es verdadera antes de S, y S termina, entonces Q es verdadera después
  </text>
  
  <!-- Interpretation box -->
  <rect x="50" y="330" width="600" height="55" fill="#e3f2fd" stroke="#1976d2" stroke-width="1.5" rx="5"/>
  <text x="350" y="352" class="label" font-weight="bold" font-size="13" fill="#1976d2">Corrección Parcial vs Total</text>
  
  <text x="70" y="372" class="label" font-size="11" text-anchor="start">• Parcial: {P} S {Q} garantiza Q si S termina</text>
  <text x="370" y="372" class="label" font-size="11" text-anchor="start">• Total: [P] S [Q] garantiza terminación + Q</text>
</svg>
