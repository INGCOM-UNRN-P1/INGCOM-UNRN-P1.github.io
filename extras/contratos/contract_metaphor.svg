<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="700" height="400" viewBox="0 0 700 400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #fff; stroke: #666; stroke-width: 2; rx: 5; }
      .client { fill: #e3f2fd; stroke: #1976d2; }
      .provider { fill: #f3e5f5; stroke: #6a1b9a; }
      .contract { fill: #fff9c4; stroke: #f57f17; stroke-width: 3; }
      .arrow { fill: none; stroke: #666; stroke-width: 2; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 14px; fill: #333; text-anchor: middle; }
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #1976d2; text-anchor: middle; }
      .condition { font-family: "Courier New", monospace; font-size: 12px; fill: #333; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
  
  <text x="350" y="30" class="title">Metáfora del Contrato: Cliente y Proveedor</text>
  
  <!-- Client box -->
  <rect x="50" y="80" width="200" height="250" class="box client"/>
  <text x="150" y="110" class="label" font-weight="bold" font-size="16">Cliente</text>
  <text x="150" y="135" class="label" font-size="13">(Llamador)</text>
  
  <text x="150" y="165" class="label" font-weight="bold" fill="#1976d2">Obligaciones:</text>
  <text x="70" y="185" class="condition" text-anchor="start">• Garantizar precondición</text>
  <text x="70" y="205" class="condition" text-anchor="start">• Cumplir restricciones</text>
  <text x="70" y="225" class="condition" text-anchor="start">• Pasar datos válidos</text>
  
  <text x="150" y="255" class="label" font-weight="bold" fill="#1976d2">Derechos:</text>
  <text x="70" y="275" class="condition" text-anchor="start">• Asumir postcondición</text>
  <text x="70" y="295" class="condition" text-anchor="start">• Confiar en resultado</text>
  <text x="70" y="315" class="condition" text-anchor="start">• Comportamiento definido</text>
  
  <!-- Provider box -->
  <rect x="450" y="80" width="200" height="250" class="box provider"/>
  <text x="550" y="110" class="label" font-weight="bold" font-size="16">Proveedor</text>
  <text x="550" y="135" class="label" font-size="13">(Función)</text>
  
  <text x="550" y="165" class="label" font-weight="bold" fill="#6a1b9a">Obligaciones:</text>
  <text x="470" y="185" class="condition" text-anchor="start">• Garantizar postcondición</text>
  <text x="470" y="205" class="condition" text-anchor="start">• Preservar invariantes</text>
  <text x="470" y="225" class="condition" text-anchor="start">• Producir resultado válido</text>
  
  <text x="550" y="255" class="label" font-weight="bold" fill="#6a1b9a">Derechos:</text>
  <text x="470" y="275" class="condition" text-anchor="start">• Asumir precondición</text>
  <text x="470" y="295" class="condition" text-anchor="start">• No validar entrada</text>
  <text x="470" y="315" class="condition" text-anchor="start">• Comportamiento libre si</text>
  <text x="470" y="332" class="condition" text-anchor="start">  Pre es falsa</text>
  
  <!-- Contract in the middle -->
  <rect x="275" y="140" width="150" height="140" class="box contract"/>
  <text x="350" y="165" class="label" font-weight="bold" font-size="15" fill="#f57f17">CONTRATO</text>
  
  <text x="350" y="195" class="label" font-weight="bold" font-size="12">Precondición</text>
  <text x="350" y="210" class="condition">Pre(x₁, ..., xₙ)</text>
  
  <text x="350" y="235" class="label" font-weight="bold" font-size="12">Postcondición</text>
  <text x="350" y="250" class="condition">Post(x₁, ..., xₙ, r)</text>
  
  <text x="350" y="275" class="label" font-weight="bold" font-size="12">Invariante</text>
  <text x="350" y="290" class="condition">Inv(estado)</text>
  
  <!-- Arrows -->
  <path d="M 250,180 L 270,180" class="arrow"/>
  <text x="260" y="170" class="label" font-size="11" fill="#999">debe</text>
  
  <path d="M 430,180 L 450,180" class="arrow"/>
  <text x="440" y="170" class="label" font-size="11" fill="#999">puede</text>
  
  <path d="M 430,240 L 450,240" class="arrow"/>
  <text x="440" y="230" class="label" font-size="11" fill="#999">debe</text>
  
  <path d="M 270,240 L 250,240" class="arrow"/>
  <text x="260" y="230" class="label" font-size="11" fill="#999">puede</text>
  
  <!-- Bottom note -->
  <rect x="100" y="350" width="500" height="35" fill="#f5f5f5" stroke="#999" stroke-width="1" rx="3"/>
  <text x="350" y="370" class="label" font-size="13">Si Pre es verdadera al llamar, entonces Post será verdadera al retornar</text>
</svg>
