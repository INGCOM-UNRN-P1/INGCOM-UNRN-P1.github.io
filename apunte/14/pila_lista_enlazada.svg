<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="600" height="450" viewBox="0 0 600 450" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .node { fill: #fff; stroke: #333; stroke-width: 2; }
      .node-data { fill: #bbdefb; }
      .node-ptr { fill: #ffccbc; }
      .null-ptr { fill: #e0e0e0; }
      .arrow { fill: none; stroke: #d32f2f; stroke-width: 2; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
      .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #1976d2; }
      .code { font-family: monospace; font-size: 11px; fill: #666; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#d32f2f"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="300" y="25" text-anchor="middle" class="title">Implementación de Pila con Lista Enlazada</text>
  
  <!-- Stack structure pointer -->
  <rect x="50" y="60" width="120" height="60" class="node"/>
  <text x="110" y="75" text-anchor="middle" class="label" font-weight="bold">pila_t</text>
  <line x1="50" y1="90" x2="170" y2="90" stroke="#333" stroke-width="1"/>
  
  <text x="70" y="105" class="label" font-size="10">tope:</text>
  <rect x="115" y="95" width="45" height="15" class="node-ptr"/>
  
  <text x="70" y="120" class="label" font-size="10">tamanio:</text>
  <text x="140" y="120" text-anchor="middle" class="label">4</text>
  
  <!-- Arrow from tope to first node -->
  <path d="M 160,102 L 220,102" class="arrow"/>
  
  <!-- Node 1 (top) -->
  <g id="node1">
    <rect x="230" y="70" width="100" height="65" class="node"/>
    <text x="280" y="85" text-anchor="middle" class="label" font-weight="bold">Nodo</text>
    <line x1="230" y1="95" x2="330" y2="95" stroke="#333" stroke-width="1"/>
    
    <text x="245" y="110" class="label" font-size="10">dato:</text>
    <rect x="280" y="100" width="40" height="15" class="node-data"/>
    <text x="300" y="111" text-anchor="middle" class="label">78</text>
    
    <text x="245" y="127" class="label" font-size="10">sig:</text>
    <rect x="280" y="120" width="40" height="15" class="node-ptr"/>
  </g>
  
  <!-- Arrow to node 2 -->
  <path d="M 320,127 L 380,127" class="arrow"/>
  
  <!-- Node 2 -->
  <g id="node2">
    <rect x="390" y="70" width="100" height="65" class="node"/>
    <text x="440" y="85" text-anchor="middle" class="label" font-weight="bold">Nodo</text>
    <line x1="390" y1="95" x2="490" y2="95" stroke="#333" stroke-width="1"/>
    
    <text x="405" y="110" class="label" font-size="10">dato:</text>
    <rect x="440" y="100" width="40" height="15" class="node-data"/>
    <text x="460" y="111" text-anchor="middle" class="label">42</text>
    
    <text x="405" y="127" class="label" font-size="10">sig:</text>
    <rect x="440" y="120" width="40" height="15" class="node-ptr"/>
  </g>
  
  <!-- Arrow to node 3 -->
  <path d="M 460,135 L 460,170 L 280,170 L 280,200" class="arrow"/>
  
  <!-- Node 3 -->
  <g id="node3">
    <rect x="230" y="210" width="100" height="65" class="node"/>
    <text x="280" y="225" text-anchor="middle" class="label" font-weight="bold">Nodo</text>
    <line x1="230" y1="235" x2="330" y2="235" stroke="#333" stroke-width="1"/>
    
    <text x="245" y="250" class="label" font-size="10">dato:</text>
    <rect x="280" y="240" width="40" height="15" class="node-data"/>
    <text x="300" y="251" text-anchor="middle" class="label">25</text>
    
    <text x="245" y="267" class="label" font-size="10">sig:</text>
    <rect x="280" y="260" width="40" height="15" class="node-ptr"/>
  </g>
  
  <!-- Arrow to node 4 -->
  <path d="M 320,267 L 380,267" class="arrow"/>
  
  <!-- Node 4 (bottom) -->
  <g id="node4">
    <rect x="390" y="210" width="100" height="65" class="node"/>
    <text x="440" y="225" text-anchor="middle" class="label" font-weight="bold">Nodo</text>
    <line x1="390" y1="235" x2="490" y2="235" stroke="#333" stroke-width="1"/>
    
    <text x="405" y="250" class="label" font-size="10">dato:</text>
    <rect x="440" y="240" width="40" height="15" class="node-data"/>
    <text x="460" y="251" text-anchor="middle" class="label">10</text>
    
    <text x="405" y="267" class="label" font-size="10">sig:</text>
    <rect x="440" y="260" width="40" height="15" class="null-ptr"/>
    <text x="460" y="271" text-anchor="middle" class="label" font-size="10">NULL</text>
  </g>
  
  <!-- Labels -->
  <text x="550" y="105" text-anchor="start" class="label" fill="#d32f2f" font-weight="bold">← TOPE</text>
  <text x="550" y="245" text-anchor="start" class="label" fill="#666" font-weight="bold">← FONDO</text>
  
  <!-- Code example -->
  <rect x="30" y="310" width="540" height="120" fill="#f5f5f5" stroke="#999" stroke-width="1" rx="3"/>
  <text x="40" y="330" class="code">// Operación push(99):</text>
  <text x="40" y="345" class="code">nuevo_nodo->dato = 99;</text>
  <text x="40" y="360" class="code">nuevo_nodo->siguiente = pila->tope;  // Apunta al actual tope</text>
  <text x="40" y="375" class="code">pila->tope = nuevo_nodo;              // El nuevo nodo es el nuevo tope</text>
  <text x="40" y="390" class="code">pila->tamanio++;                      // Incrementa el tamaño</text>
  
  <text x="40" y="415" class="code">// Resultado: 99 queda en el tope, apuntando a 78</text>
</svg>
