<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <!-- Título -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle">
    Punteros NULL y Punteros Salvajes (Wild Pointers)
  </text>
  
  <!-- Puntero NULL (Seguro) -->
  <g id="puntero-null">
    <rect x="50" y="60" width="380" height="200" fill="#E8F5E9" stroke="#2E7D32" stroke-width="2" rx="8"/>
    
    <text x="240" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2E7D32">
      ✓ Puntero NULL (Seguro)
    </text>
    
    <!-- Representación visual -->
    <g transform="translate(100, 110)">
      <rect x="0" y="0" width="100" height="60" fill="#A5D6A7" stroke="#2E7D32" stroke-width="2"/>
      <text x="50" y="25" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">ptr</text>
      <text x="50" y="42" font-family="monospace" font-size="13" text-anchor="middle" font-weight="bold">NULL</text>
      <text x="50" y="55" font-family="monospace" font-size="9" text-anchor="middle">(0x0000)</text>
      
      <!-- Símbolo de "no apunta a nada" -->
      <circle cx="180" cy="30" r="20" fill="none" stroke="#2E7D32" stroke-width="3"/>
      <line x1="165" y1="15" x2="195" y2="45" stroke="#2E7D32" stroke-width="3"/>
      <text x="180" y="75" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">
        No apunta a nada
      </text>
    </g>
    
    <!-- Código y práctica -->
    <rect x="70" y="190" width="340" height="55" fill="white" stroke="#666" stroke-width="1" rx="3"/>
    <text x="85" y="210" font-family="monospace" font-size="12">
      int *ptr = NULL;  // Inicialización segura
    </text>
    <text x="85" y="228" font-family="monospace" font-size="12">
      if (ptr != NULL) { *ptr = 10; }
    </text>
    <text x="85" y="238" font-family="Arial, sans-serif" font-size="10" fill="#2E7D32" font-style="italic">
      // ✓ Siempre verifica antes de desreferenciar
    </text>
  </g>
  
  <!-- Puntero Salvaje (Peligroso) -->
  <g id="puntero-salvaje">
    <rect x="470" y="60" width="380" height="200" fill="#FFEBEE" stroke="#C62828" stroke-width="2" rx="8"/>
    
    <text x="660" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#C62828">
      ✗ Puntero Salvaje (Peligroso)
    </text>
    
    <!-- Representación visual -->
    <g transform="translate(520, 110)">
      <rect x="0" y="0" width="100" height="60" fill="#FFCDD2" stroke="#C62828" stroke-width="3"/>
      <text x="50" y="25" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">ptr</text>
      <text x="50" y="42" font-family="monospace" font-size="13" text-anchor="middle" font-weight="bold">???</text>
      <text x="50" y="55" font-family="monospace" font-size="9" text-anchor="middle">(basura)</text>
      
      <!-- Flecha a zona peligrosa -->
      <path d="M 100 30 L 150 30" stroke="#C62828" stroke-width="3" stroke-dasharray="5,3" marker-end="url(#arrow-danger)"/>
      
      <text x="180" y="20" font-family="Arial, sans-serif" font-size="24" text-anchor="middle">⚠️</text>
      <text x="180" y="45" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#C62828" font-weight="bold">
        Zona de memoria
      </text>
      <text x="180" y="60" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#C62828" font-weight="bold">
        desconocida!
      </text>
    </g>
    
    <!-- Código y advertencia -->
    <rect x="490" y="190" width="340" height="55" fill="white" stroke="#666" stroke-width="1" rx="3"/>
    <text x="505" y="210" font-family="monospace" font-size="12" fill="#C62828">
      int *ptr;         // ✗ NO inicializado
    </text>
    <text x="505" y="228" font-family="monospace" font-size="12" fill="#C62828">
      *ptr = 10;        // ✗ COMPORTAMIENTO INDEFINIDO
    </text>
    <text x="505" y="238" font-family="Arial, sans-serif" font-size="10" fill="#C62828" font-style="italic">
      // ✗ Puede crashear, corromper datos, etc.
    </text>
  </g>
  
  <!-- Puntero Colgante (Dangling) -->
  <g id="puntero-colgante">
    <rect x="50" y="280" width="800" height="200" fill="#FFF3E0" stroke="#F57C00" stroke-width="2" rx="8"/>
    
    <text x="450" y="310" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#F57C00">
      ⚠️ Puntero Colgante (Dangling Pointer)
    </text>
    
    <text x="450" y="330" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">
      Apunta a memoria que ya fue liberada o está fuera de scope
    </text>
    
    <!-- Ejemplo de puntero colgante -->
    <g transform="translate(70, 345)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="13" font-weight="bold">
        Ejemplo:
      </text>
      
      <rect x="0" y="10" width="360" height="110" fill="white" stroke="#666" stroke-width="1" rx="3"/>
      <text x="15" y="30" font-family="monospace" font-size="12">
        int *ptr;
      </text>
      <text x="15" y="48" font-family="monospace" font-size="12">
        {
      </text>
      <text x="30" y="66" font-family="monospace" font-size="12">
          int x = 42;
      </text>
      <text x="30" y="84" font-family="monospace" font-size="12">
          ptr = &amp;x;      // ptr apunta a x
      </text>
      <text x="15" y="102" font-family="monospace" font-size="12">
        } // x sale de scope y se destruye
      </text>
      <text x="15" y="115" font-family="monospace" font-size="12" fill="#F57C00">
        *ptr = 10;  // ⚠️ ptr es dangling pointer!
      </text>
    </g>
    
    <!-- Visualización del problema -->
    <g transform="translate(480, 355)">
      <!-- Antes -->
      <g>
        <text x="0" y="0" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
          Dentro del bloque:
        </text>
        <rect x="0" y="10" width="70" height="40" fill="#A5D6A7" stroke="#2E7D32" stroke-width="2"/>
        <text x="35" y="25" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">x</text>
        <text x="35" y="40" font-family="Arial, sans-serif" font-size="13" text-anchor="middle">42</text>
        
        <rect x="90" y="10" width="70" height="40" fill="#64B5F6" stroke="#1976D2" stroke-width="2"/>
        <text x="125" y="25" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">ptr</text>
        <text x="125" y="40" font-family="monospace" font-size="10" text-anchor="middle">&amp;x</text>
        
        <path d="M 125 50 Q 125 65 35 55" stroke="#1976D2" stroke-width="2" fill="none" marker-end="url(#arrow-blue)"/>
      </g>
      
      <!-- Después -->
      <g transform="translate(0, 80)">
        <text x="0" y="0" font-family="Arial, sans-serif" font-size="12" font-weight="bold">
          Fuera del bloque:
        </text>
        <rect x="0" y="10" width="70" height="40" fill="#E0E0E0" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
        <text x="35" y="30" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#999">x</text>
        <text x="35" y="42" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#999">(destruido)</text>
        
        <rect x="90" y="10" width="70" height="40" fill="#FFCDD2" stroke="#C62828" stroke-width="2"/>
        <text x="125" y="25" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">ptr</text>
        <text x="125" y="40" font-family="monospace" font-size="10" text-anchor="middle">&amp;x</text>
        
        <path d="M 125 50 Q 125 65 35 55" stroke="#C62828" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrow-danger)"/>
        
        <text x="200" y="30" font-family="Arial, sans-serif" font-size="12" fill="#C62828" font-weight="bold">
          ⚠️ Dangling!
        </text>
      </g>
    </g>
  </g>
  
  <!-- Buenas prácticas -->
  <rect x="50" y="490" width="800" height="5" fill="#2E7D32"/>
  
  <!-- Definición de marcadores -->
  <defs>
    <marker id="arrow-danger" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#C62828"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976D2"/>
    </marker>
  </defs>
</svg>
