<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="600" height="480" viewBox="0 0 600 480" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .node { fill: #fff; stroke: #333; stroke-width: 2; }
      .array-cell { fill: #bbdefb; stroke: #333; stroke-width: 1.5; }
      .empty-cell { fill: #f5f5f5; stroke: #333; stroke-width: 1.5; stroke-dasharray: 3,3; }
      .node-ptr { fill: #ffccbc; }
      .arrow { fill: none; stroke: #d32f2f; stroke-width: 2; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
      .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #1976d2; }
      .code { font-family: monospace; font-size: 11px; fill: #666; }
      .index { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#d32f2f"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="300" y="25" text-anchor="middle" class="title">Implementación de Pila con Arreglo Dinámico</text>
  
  <!-- Stack structure -->
  <rect x="50" y="60" width="140" height="90" class="node"/>
  <text x="120" y="75" text-anchor="middle" class="label" font-weight="bold">pila_t</text>
  <line x1="50" y1="90" x2="190" y2="90" stroke="#333" stroke-width="1"/>
  
  <text x="70" y="105" class="label" font-size="10">elementos:</text>
  <rect x="130" y="95" width="50" height="15" class="node-ptr"/>
  
  <text x="70" y="123" class="label" font-size="10">tope:</text>
  <text x="155" y="123" text-anchor="middle" class="label" font-weight="bold">3</text>
  
  <text x="70" y="141" class="label" font-size="10">capacidad:</text>
  <text x="155" y="141" text-anchor="middle" class="label">8</text>
  
  <!-- Arrow from elementos to array -->
  <path d="M 155,110 L 155,160 L 230,160" class="arrow"/>
  
  <!-- Array visualization -->
  <g id="array">
    <!-- Indices -->
    <text x="250" y="145" text-anchor="middle" class="index">0</text>
    <text x="300" y="145" text-anchor="middle" class="index">1</text>
    <text x="350" y="145" text-anchor="middle" class="index">2</text>
    <text x="400" y="145" text-anchor="middle" class="index">3</text>
    <text x="450" y="145" text-anchor="middle" class="index">4</text>
    <text x="500" y="145" text-anchor="middle" class="index">5</text>
    <text x="250" y="235" text-anchor="middle" class="index">6</text>
    <text x="300" y="235" text-anchor="middle" class="index">7</text>
    
    <!-- First row (indices 0-5) -->
    <rect x="230" y="150" width="40" height="40" class="array-cell"/>
    <text x="250" y="175" text-anchor="middle" class="label" font-weight="bold">10</text>
    
    <rect x="280" y="150" width="40" height="40" class="array-cell"/>
    <text x="300" y="175" text-anchor="middle" class="label" font-weight="bold">25</text>
    
    <rect x="330" y="150" width="40" height="40" class="array-cell"/>
    <text x="350" y="175" text-anchor="middle" class="label" font-weight="bold">42</text>
    
    <rect x="380" y="150" width="40" height="40" class="array-cell"/>
    <text x="400" y="175" text-anchor="middle" class="label" font-weight="bold">78</text>
    
    <rect x="430" y="150" width="40" height="40" class="empty-cell"/>
    
    <rect x="480" y="150" width="40" height="40" class="empty-cell"/>
    
    <!-- Second row (indices 6-7) -->
    <rect x="230" y="240" width="40" height="40" class="empty-cell"/>
    
    <rect x="280" y="240" width="40" height="40" class="empty-cell"/>
  </g>
  
  <!-- Tope indicator -->
  <path d="M 400,200 L 400,220" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="400" y="235" text-anchor="middle" class="label" fill="#d32f2f" font-weight="bold">TOPE</text>
  <text x="400" y="248" text-anchor="middle" class="label" fill="#666" font-size="10">(índice 3)</text>
  
  <!-- Labels for stack positions -->
  <text x="560" y="170" text-anchor="start" class="label" fill="#666">← FONDO</text>
  <text x="560" y="185" text-anchor="start" class="label" fill="#d32f2f" font-weight="bold">← TOPE</text>
  
  <!-- Code example -->
  <rect x="30" y="310" width="540" height="150" fill="#f5f5f5" stroke="#999" stroke-width="1" rx="3"/>
  <text x="40" y="330" class="code">// Operación push(99):</text>
  <text x="40" y="345" class="code">si tope + 1 >= capacidad entonces</text>
  <text x="40" y="360" class="code">    redimensionar_arreglo(capacidad * 2)  // Duplicar capacidad si es necesario</text>
  <text x="40" y="375" class="code">fin si</text>
  <text x="40" y="390" class="code">pila->tope++;</text>
  <text x="40" y="405" class="code">pila->elementos[pila->tope] = 99;      // elementos[4] = 99</text>
  
  <text x="40" y="430" class="code">// Operación pop():</text>
  <text x="40" y="445" class="code">retornar pila->elementos[pila->tope--];  // Retorna 78, tope queda en 2</text>
  
  <!-- Note about advantages -->
  <text x="30" y="475" class="label" fill="#1976d2" font-size="11px" font-weight="bold">Ventaja: Localidad de caché excelente. Desventaja: Requiere redimensionamiento ocasional.</text>
</svg>
