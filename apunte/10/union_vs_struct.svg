<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650">
  <!-- Título -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle">
    Estructuras (struct) vs Uniones (union)
  </text>
  
  <!-- STRUCT -->
  <g id="struct">
    <rect x="50" y="60" width="380" height="250" fill="#E8F5E9" stroke="#2E7D32" stroke-width="2" rx="8"/>
    
    <text x="240" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2E7D32">
      struct (Todos los miembros)
    </text>
    
    <!-- Código -->
    <rect x="70" y="105" width="340" height="80" fill="white" stroke="#666" stroke-width="1" rx="3"/>
    <text x="80" y="122" font-family="monospace" font-size="11">
      typedef struct {
    </text>
    <text x="90" y="138" font-family="monospace" font-size="11">
        int entero;    // 4 bytes
    </text>
    <text x="90" y="154" font-family="monospace" font-size="11">
        float real;    // 4 bytes
    </text>
    <text x="90" y="170" font-family="monospace" font-size="11">
        char letra;    // 1 byte
    </text>
    <text x="80" y="180" font-family="monospace" font-size="11">
      } datos_struct_t;
    </text>
    
    <!-- Memoria struct -->
    <text x="240" y="210" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">
      Memoria (cada miembro separado):
    </text>
    
    <g transform="translate(70, 220)">
      <rect x="0" y="0" width="100" height="40" fill="#81C784" stroke="#2E7D32" stroke-width="2"/>
      <text x="50" y="23" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" font-weight="bold">
        entero
      </text>
      <text x="50" y="35" font-family="monospace" font-size="9" text-anchor="middle">
        4 bytes
      </text>
      
      <rect x="110" y="0" width="100" height="40" fill="#A5D6A7" stroke="#2E7D32" stroke-width="2"/>
      <text x="160" y="23" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" font-weight="bold">
        real
      </text>
      <text x="160" y="35" font-family="monospace" font-size="9" text-anchor="middle">
        4 bytes
      </text>
      
      <rect x="220" y="0" width="100" height="40" fill="#C8E6C9" stroke="#2E7D32" stroke-width="2"/>
      <text x="270" y="23" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" font-weight="bold">
        letra
      </text>
      <text x="270" y="35" font-family="monospace" font-size="9" text-anchor="middle">
        1 byte
      </text>
    </g>
    
    <text x="240" y="285" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">
      Tamaño total: ~12 bytes (con padding)
    </text>
    
    <text x="240" y="303" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#2E7D32">
      ✓ Todos accesibles simultáneamente
    </text>
  </g>
  
  <!-- UNION -->
  <g id="union">
    <rect x="470" y="60" width="380" height="250" fill="#E3F2FD" stroke="#1976D2" stroke-width="2" rx="8"/>
    
    <text x="660" y="90" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#1976D2">
      union (Un miembro a la vez)
    </text>
    
    <!-- Código -->
    <rect x="490" y="105" width="340" height="80" fill="white" stroke="#666" stroke-width="1" rx="3"/>
    <text x="500" y="122" font-family="monospace" font-size="11">
      typedef union {
    </text>
    <text x="510" y="138" font-family="monospace" font-size="11">
        int entero;    // 4 bytes
    </text>
    <text x="510" y="154" font-family="monospace" font-size="11">
        float real;    // 4 bytes
    </text>
    <text x="510" y="170" font-family="monospace" font-size="11">
        char letra;    // 1 byte
    </text>
    <text x="500" y="180" font-family="monospace" font-size="11">
      } datos_union_t;
    </text>
    
    <!-- Memoria union -->
    <text x="660" y="210" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">
      Memoria (todos comparten espacio):
    </text>
    
    <g transform="translate(490, 220)">
      <!-- Una sola caja grande que representa el espacio compartido -->
      <rect x="0" y="0" width="320" height="40" fill="#FFE082" stroke="#F57C00" stroke-width="3"/>
      
      <!-- Etiquetas superpuestas -->
      <text x="20" y="23" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#D84315">
        entero
      </text>
      <text x="130" y="23" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#0277BD">
        real
      </text>
      <text x="250" y="23" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2E7D32">
        letra
      </text>
      
      <text x="160" y="35" font-family="monospace" font-size="9" text-anchor="middle">
        Mismo espacio de memoria
      </text>
    </g>
    
    <text x="660" y="285" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" font-weight="bold">
      Tamaño total: 4 bytes (el mayor)
    </text>
    
    <text x="660" y="303" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#F57C00">
      ⚠️ Solo uno válido a la vez
    </text>
  </g>
  
  <!-- Comparación visual -->
  <g id="comparacion">
    <rect x="50" y="330" width="800" height="290" fill="#F5F5F5" stroke="#666" stroke-width="2" rx="8"/>
    
    <text x="450" y="360" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle">
      Comparación: Uso de Memoria
    </text>
    
    <!-- Ejemplo struct -->
    <g transform="translate(80, 380)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="13" font-weight="bold">
        Ejemplo con struct:
      </text>
      
      <rect x="0" y="10" width="320" height="80" fill="white" stroke="#666" stroke-width="1" rx="3"/>
      <text x="10" y="30" font-family="monospace" font-size="11">
        datos_struct_t datos;
      </text>
      <text x="10" y="46" font-family="monospace" font-size="11">
        datos.entero = 42;
      </text>
      <text x="10" y="62" font-family="monospace" font-size="11">
        datos.real = 3.14;
      </text>
      <text x="10" y="78" font-family="monospace" font-size="11">
        datos.letra = 'A';
      </text>
      <text x="10" y="88" font-family="Arial, sans-serif" font-size="10" fill="#2E7D32">
        // ✓ Los 3 valores existen
      </text>
      
      <!-- Visualización -->
      <g transform="translate(0, 105)">
        <rect x="0" y="0" width="80" height="30" fill="#81C784" stroke="#2E7D32" stroke-width="1"/>
        <text x="40" y="19" font-family="monospace" font-size="10" text-anchor="middle">42</text>
        
        <rect x="85" y="0" width="80" height="30" fill="#A5D6A7" stroke="#2E7D32" stroke-width="1"/>
        <text x="125" y="19" font-family="monospace" font-size="10" text-anchor="middle">3.14</text>
        
        <rect x="170" y="0" width="80" height="30" fill="#C8E6C9" stroke="#2E7D32" stroke-width="1"/>
        <text x="210" y="19" font-family="monospace" font-size="10" text-anchor="middle">'A'</text>
      </g>
    </g>
    
    <!-- Ejemplo union -->
    <g transform="translate(450, 380)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="13" font-weight="bold">
        Ejemplo con union:
      </text>
      
      <rect x="0" y="10" width="340" height="80" fill="white" stroke="#666" stroke-width="1" rx="3"/>
      <text x="10" y="30" font-family="monospace" font-size="11">
        datos_union_t datos;
      </text>
      <text x="10" y="46" font-family="monospace" font-size="11">
        datos.entero = 42;
      </text>
      <text x="10" y="62" font-family="monospace" font-size="11">
        datos.real = 3.14;  // Sobrescribe
      </text>
      <text x="10" y="78" font-family="monospace" font-size="11">
        datos.letra = 'A';  // Sobrescribe
      </text>
      <text x="10" y="88" font-family="Arial, sans-serif" font-size="10" fill="#F57C00">
        // ⚠️ Solo el último es válido
      </text>
      
      <!-- Visualización -->
      <g transform="translate(0, 105)">
        <rect x="0" y="0" width="245" height="30" fill="#FFE082" stroke="#F57C00" stroke-width="2"/>
        <text x="30" y="19" font-family="monospace" font-size="10" text-decoration="line-through" fill="#999">42</text>
        <text x="100" y="19" font-family="monospace" font-size="10" text-decoration="line-through" fill="#999">3.14</text>
        <text x="170" y="19" font-family="monospace" font-size="10" font-weight="bold">'A'</text>
        <text x="210" y="19" font-family="Arial, sans-serif" font-size="9">← válido</text>
      </g>
    </g>
    
    <!-- Casos de uso -->
    <g transform="translate(80, 520)">
      <rect x="0" y="0" width="700" height="80" fill="#E0F7FA" stroke="#0277BD" stroke-width="2" rx="5"/>
      <text x="350" y="20" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">
        Cuándo usar cada uno:
      </text>
      
      <text x="10" y="40" font-family="Arial, sans-serif" font-size="11">
        <tspan font-weight="bold" fill="#2E7D32">struct:</tspan> Cuando necesitás almacenar múltiples valores simultáneamente (registros, objetos)
      </text>
      <text x="10" y="58" font-family="Arial, sans-serif" font-size="11">
        <tspan font-weight="bold" fill="#1976D2">union:</tspan> Cuando necesitás ahorrar memoria y solo un valor es válido a la vez (variantes, interpretaciones)
      </text>
      <text x="10" y="72" font-family="Arial, sans-serif" font-size="10" font-style="italic" fill="#666">
        Nota: Las uniones son más comunes en programación de sistemas y drivers de bajo nivel
      </text>
    </g>
  </g>
</svg>
